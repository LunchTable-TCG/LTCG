---
title: Evaluators
description: Decision evaluation components for strategic reasoning
---

import { Aside } from '@astrojs/starlight/components';

## Overview

Evaluators analyze game situations and provide scoring/recommendations. They're used by the strategy system to make informed decisions and can be customized for different playstyles.

## Core Evaluators

### boardPositionEvaluator

Scores the current board state from your perspective.

```typescript
import { boardPositionEvaluator } from 'plugin-ltcg';

const score = await boardPositionEvaluator.evaluate(runtime, gameState);
```

**Returns:**
```typescript
interface BoardPositionScore {
  score: number;              // -100 to 100 (positive = advantageous)

  factors: {
    creatureAdvantage: number;    // +/- based on creature count/quality
    lifeAdvantage: number;        // +/- based on life totals
    cardAdvantage: number;        // +/- based on cards in hand
    boardControl: number;         // +/- based on threat assessment
    tempAdvantage: number;        // +/- based on mana/tempo
  };

  breakdown: string;          // Human-readable explanation
}
```

**Scoring factors:**

| Factor | Weight | Description |
|--------|--------|-------------|
| Creature advantage | 25% | Total stats on board comparison |
| Life advantage | 20% | Life point differential |
| Card advantage | 20% | Hand size comparison |
| Board control | 25% | Threat level differential |
| Tempo advantage | 10% | Mana efficiency this turn |

---

### actionEvaluator

Scores potential actions to find the best play.

```typescript
import { actionEvaluator } from 'plugin-ltcg';

const scoredActions = await actionEvaluator.evaluate(runtime, legalActions);
```

**Returns:**
```typescript
interface ScoredAction {
  action: LegalAction;
  score: number;              // 0 to 100

  reasoning: {
    immediate: string;        // What happens now
    future: string;           // What this sets up
    risk: string;             // What could go wrong
  };

  confidence: number;         // 0 to 1
}
```

**Example output:**
```typescript
[
  {
    action: { action: 'ATTACK', params: { attackerId: 'x', targetId: 'opponent' } },
    score: 95,
    reasoning: {
      immediate: 'Deal 5 damage to opponent (15 -> 10 HP)',
      future: 'Puts opponent in lethal range next turn',
      risk: 'Opponent may have trap set',
    },
    confidence: 0.85,
  },
  {
    action: { action: 'SUMMON_CREATURE', params: { cardId: 'y' } },
    score: 70,
    reasoning: {
      immediate: 'Add 3/4 creature to board',
      future: 'Increases board presence for next turn',
      risk: 'Uses all mana, vulnerable this turn',
    },
    confidence: 0.9,
  },
]
```

---

### threatEvaluator

Assesses threats on the opponent's board.

```typescript
import { threatEvaluator } from 'plugin-ltcg';

const threats = await threatEvaluator.evaluate(runtime, opponentField);
```

**Returns:**
```typescript
interface ThreatAssessment {
  threats: {
    card: Card;
    level: 'low' | 'medium' | 'high' | 'critical';
    damage: number;           // Potential damage per turn
    abilities: string[];      // Dangerous abilities
    counters: string[];       // Ways to handle this threat
  }[];

  totalThreat: number;        // Combined threat score
  priority: Card | null;      // Most important to remove
  lethalThreat: boolean;      // Can they kill us next turn?
}
```

---

### emotionalStateEvaluator

Tracks agent "emotional" state for personality-driven decisions.

```typescript
import { emotionalStateEvaluator } from 'plugin-ltcg';

const emotion = await emotionalStateEvaluator.evaluate(runtime);
```

**Returns:**
```typescript
interface EmotionalState {
  confidence: number;         // 0-1, based on board position
  frustration: number;        // 0-1, based on recent losses/bad draws
  aggression: number;         // 0-1, modified by game events
  caution: number;            // 0-1, based on opponent threats

  mood: 'confident' | 'desperate' | 'cautious' | 'tilted' | 'focused';
  suggestion: string;         // How mood should affect play
}
```

<Aside type="tip" title="Personality">
  Use emotional state to add personality to your agent. A "tilted" agent might make riskier plays, while a "cautious" one plays safer after losses.
</Aside>

**Usage in decision-making:**
```typescript
const emotion = await emotionalStateEvaluator.evaluate(runtime);

if (emotion.mood === 'desperate' && emotion.confidence < 0.2) {
  // Agent is losing badly - might go for high-risk plays
  strategy.adjustRiskTolerance(0.8);
}

if (emotion.mood === 'confident' && emotion.aggression > 0.7) {
  // Agent is winning and aggressive - push for lethal
  strategy.prioritize('damage');
}
```

---

### outcomePredictor

Predicts results of potential actions.

```typescript
import { outcomePredictor } from 'plugin-ltcg';

const prediction = await outcomePredictor.predict(runtime, action);
```

**Returns:**
```typescript
interface OutcomePrediction {
  success: number;            // Probability of action succeeding (0-1)

  expectedOutcome: {
    lifeChange: number;       // Expected LP change for us
    opponentLifeChange: number;
    boardChange: number;      // Expected board score change
    cardsGained: number;      // Expected card advantage change
  };

  risks: {
    description: string;
    probability: number;
    impact: number;           // Negative impact if this happens
  }[];

  bestCase: GameState;        // State if everything goes well
  worstCase: GameState;       // State if opponent responds optimally
}
```

---

### mulliganEvaluator

Evaluates opening hands and suggests mulligans.

```typescript
import { mulliganEvaluator } from 'plugin-ltcg';

const advice = await mulliganEvaluator.evaluate(runtime, openingHand);
```

**Returns:**
```typescript
interface MulliganAdvice {
  keep: boolean;              // Overall recommendation
  confidence: number;

  handQuality: number;        // 0-100

  analysis: {
    curve: string;            // "aggressive", "balanced", "slow"
    synergy: number;          // How well cards work together
    answers: number;          // Number of removal/response cards
    threats: number;          // Number of proactive cards
  };

  cardsToMulligan: Card[];    // If not keeping, which to replace
  reasoning: string;
}
```

---

## Custom Evaluators

Create evaluators tailored to your strategy:

```typescript
import { createEvaluator } from 'plugin-ltcg';

const dragonSynergyEvaluator = createEvaluator({
  name: 'dragon-synergy',

  async evaluate(runtime, gameState) {
    const dragons = gameState.self.field.filter(
      c => c.archetype === 'infernal_dragons'
    );
    const dragonCount = dragons.length;

    // Dragons get stronger together
    const synergyBonus = dragonCount * dragonCount * 5;

    // Check for dragon-specific combos
    const hasBreathWeapon = dragons.some(d => d.abilities.includes('breath'));
    const hasHoard = gameState.self.field.some(c => c.name === 'Dragon Hoard');

    let comboBonus = 0;
    if (hasBreathWeapon && dragonCount >= 2) comboBonus += 20;
    if (hasHoard) comboBonus += dragonCount * 10;

    return {
      score: synergyBonus + comboBonus,
      dragonCount,
      synergyActive: dragonCount >= 2,
      suggestion: dragonCount < 2
        ? 'Need more dragons for synergy'
        : `${dragonCount} dragons - synergy active!`,
    };
  },
});

// Register with plugin
ltcgPlugin.registerEvaluator(dragonSynergyEvaluator);
```

## Combining Evaluators

Evaluators work together for holistic decisions:

```typescript
async function makeDecision(runtime) {
  const [board, actions, threats, emotion] = await Promise.all([
    boardPositionEvaluator.evaluate(runtime, gameState),
    actionEvaluator.evaluate(runtime, legalActions),
    threatEvaluator.evaluate(runtime, opponentField),
    emotionalStateEvaluator.evaluate(runtime),
  ]);

  // Weight action scores by current situation
  const weightedActions = actions.map(a => ({
    ...a,
    adjustedScore: a.score
      * (threats.lethalThreat ? (a.action === 'defense' ? 1.5 : 0.5) : 1)
      * (emotion.aggression > 0.7 ? (a.action === 'ATTACK' ? 1.2 : 1) : 1),
  }));

  // Sort by adjusted score
  weightedActions.sort((a, b) => b.adjustedScore - a.adjustedScore);

  return weightedActions[0].action;
}
```

## Next Steps

import { LinkCard, CardGrid } from '@astrojs/starlight/components';

<CardGrid>
  <LinkCard
    title="Decision Making"
    description="Strategic decision framework"
    href="/strategy/decision-making/"
  />
  <LinkCard
    title="Board Analysis"
    description="Advanced board evaluation"
    href="/strategy/board-analysis/"
  />
</CardGrid>
