# =============================================================================
# LTCG Test Environment Configuration
# =============================================================================
# Copy this file to `.env.test` and fill in your test-specific values.
# These variables are used for running unit tests, integration tests, and E2E tests.
# =============================================================================

# -----------------------------------------------------------------------------
# Convex Backend - Test Deployment
# -----------------------------------------------------------------------------
# Use a separate test deployment to avoid affecting production/dev data
# Create a test deployment: `npx convex dev --once --configure=test`

# Test deployment name (format: dev:project-name-test)
CONVEX_DEPLOYMENT=dev:ltcg-test

# Test deployment URL (get from Convex dashboard)
CONVEX_URL=https://your-test-deployment.convex.cloud

# Public-facing Convex URL (must match CONVEX_URL for client-side)
NEXT_PUBLIC_CONVEX_URL=https://your-test-deployment.convex.cloud

# Alternative: Local Convex OSS (for offline testing)
# Uncomment these lines if running Convex locally
# CONVEX_URL=http://localhost:3210
# NEXT_PUBLIC_CONVEX_URL=http://localhost:3210

# -----------------------------------------------------------------------------
# Application Environment
# -----------------------------------------------------------------------------
# Set to 'test' to enable test-specific behaviors
NODE_ENV=test

# Disable rate limiting during tests for faster execution
DISABLE_RATE_LIMIT=true

# Skip email verification in tests
SKIP_EMAIL_VERIFICATION=true

# -----------------------------------------------------------------------------
# Authentication - Test Credentials
# -----------------------------------------------------------------------------
# Used by E2E tests to simulate authenticated users
# These should be valid test accounts in your test deployment

# Primary test user
TEST_USER_EMAIL=test@example.com
TEST_USER_PASSWORD=TestPassword123!

# Secondary test user (for multiplayer/social feature tests)
TEST_USER_2_EMAIL=test2@example.com
TEST_USER_2_PASSWORD=TestPassword123!

# Admin test user (for admin feature tests)
TEST_ADMIN_EMAIL=admin@example.com
TEST_ADMIN_PASSWORD=AdminPassword123!

# -----------------------------------------------------------------------------
# Email Service - Resend (Mocked in Tests)
# -----------------------------------------------------------------------------
# Leave empty or use test API key - emails should be mocked in tests
# Real emails should NOT be sent during automated testing

# Resend API key (optional - use test mode or leave empty)
RESEND_API_KEY=

# From email address (used in test email templates)
AUTH_EMAIL=test@example.com

# -----------------------------------------------------------------------------
# Playwright E2E Testing
# -----------------------------------------------------------------------------
# Configuration for browser-based end-to-end tests

# Base URL for the test application (where Next.js is running)
PLAYWRIGHT_BASE_URL=http://localhost:3000

# Browser to use (chromium, firefox, webkit, or 'all' for cross-browser)
PLAYWRIGHT_BROWSER=chromium

# Run tests in headless mode (set to 'false' for debugging)
PLAYWRIGHT_HEADLESS=true

# Number of parallel workers (adjust based on your machine)
PLAYWRIGHT_WORKERS=2

# Screenshot on failure
PLAYWRIGHT_SCREENSHOT=only-on-failure

# Video recording (on, off, retain-on-failure)
PLAYWRIGHT_VIDEO=retain-on-failure

# Slow down operations for debugging (milliseconds)
PLAYWRIGHT_SLOW_MO=0

# -----------------------------------------------------------------------------
# Test Database Seeding
# -----------------------------------------------------------------------------
# Control whether tests seed data or use existing test data

# Auto-seed test data before test runs
AUTO_SEED_TEST_DATA=true

# Clear database between test suites
CLEAR_DB_BETWEEN_TESTS=false

# Use deterministic random seed (for reproducible tests)
TEST_RANDOM_SEED=12345

# -----------------------------------------------------------------------------
# Feature Flags - Test Overrides
# -----------------------------------------------------------------------------
# Enable/disable features during testing

# Enable all features for comprehensive testing
ENABLE_ALL_FEATURES=true

# Test specific features independently
ENABLE_STORY_MODE=true
ENABLE_MULTIPLAYER=true
ENABLE_SHOP=true
ENABLE_MARKETPLACE=true
ENABLE_SOCIAL=true
ENABLE_QUESTS=true

# -----------------------------------------------------------------------------
# Testing Framework Configuration
# -----------------------------------------------------------------------------
# Vitest and Jest configuration overrides

# Test timeout (milliseconds)
TEST_TIMEOUT=30000

# Enable verbose test output
TEST_VERBOSE=false

# Coverage threshold (percentage)
TEST_COVERAGE_THRESHOLD=80

# -----------------------------------------------------------------------------
# Mock Services
# -----------------------------------------------------------------------------
# Control whether external services are mocked

# Mock external API calls
MOCK_EXTERNAL_APIs=true

# Mock payment processing
MOCK_PAYMENTS=true

# Mock image uploads
MOCK_IMAGE_UPLOADS=true

# -----------------------------------------------------------------------------
# Logging & Debugging
# -----------------------------------------------------------------------------
# Control log output during tests

# Log level (error, warn, info, debug)
LOG_LEVEL=error

# Enable debug logs for specific modules
DEBUG=

# Log test queries to console
LOG_TEST_QUERIES=false

# -----------------------------------------------------------------------------
# CI/CD Environment Detection
# -----------------------------------------------------------------------------
# These are typically set automatically by CI systems

# CI environment flag (auto-detected in most CI systems)
CI=false

# GitHub Actions specific
GITHUB_ACTIONS=false

# -----------------------------------------------------------------------------
# Performance Testing
# -----------------------------------------------------------------------------
# Configuration for performance and load testing

# Enable performance monitoring
ENABLE_PERFORMANCE_MONITORING=false

# Max request duration threshold (milliseconds)
MAX_REQUEST_DURATION=3000

# Max query duration threshold (milliseconds)
MAX_QUERY_DURATION=1000

# -----------------------------------------------------------------------------
# Security Testing
# -----------------------------------------------------------------------------
# Configuration for security-focused tests

# Enable security audit tests
ENABLE_SECURITY_TESTS=true

# Test SQL injection protection
TEST_SQL_INJECTION=true

# Test XSS protection
TEST_XSS_PROTECTION=true

# Test CSRF protection
TEST_CSRF_PROTECTION=true

# -----------------------------------------------------------------------------
# Notes
# -----------------------------------------------------------------------------
# 1. Never commit `.env.test` with real credentials to version control
# 2. Use a separate Convex deployment for testing
# 3. Mock external services to avoid API rate limits and costs
# 4. Keep test data isolated from production/development
# 5. Use deterministic seeds for reproducible test results
# 6. Clear test data periodically to prevent bloat
# =============================================================================
